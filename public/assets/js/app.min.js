!function(e,t){function n(e){console.log("%c "+e,"color:red")}var i=angular.module("app",["ngRoute","ngResource"]).constant("config",{states:["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"]});i.config(["$routeProvider",function(e){e.when("/",{templateUrl:"home.html"}).when("/employees",{templateUrl:"employees.html",controller:"EmployeesCtrl"}).when("/employees/:employeeId",{templateUrl:"employee.html",controller:"EmployeeCtrl"}).when("/teams",{templateUrl:"teams.html",controller:"TeamsCtrl"}).when("/teams/:teamId",{templateUrl:"team.html",controller:"TeamCtrl"}).otherwise({redirectTo:"/"})}]),i.factory("EmployeeService",["$resource",function(e){return e("/employees/:employeeId",{},{update:{method:"PUT"}})}]),i.factory("TeamService",["$resource",function(e){return e("/teams/:teamId")}]),i.directive("imageFallback",function(){return{link:function(e,t,n){t.bind("error",function(){angular.element(this).attr("src",n.imageFallback)})}}}).directive("editInLine",["$compile",function(e){function t(t,n,i){var l,o,r,a='<div class="in-line-container">';switch(i.editType){case"select":o=i.displayValue?"displayValue":"value",r=i.editOption,r=r.replace(i.editList,"editList"),a+='<div class="in-line-value" ng-hide="editing">{{'+o+"}}</div>",a+='<select class="in-line-input form-control" ng-show="editing"ng-model="value" ng-options="'+r+'"></select>';break;case"number":a+='<div class="in-line-value" ng-hide="editing">{{value}}</div>',a+='<input class="in-line-input form-control" ng-show="editing"type="number" ng-model="value" step="any" min="0" max="99999" />';break;default:a+='<div class="in-line-value" ng-hide="editing">{{value}}</div>',a+='<input class="in-line-input form-control" ng-show="editing"type="text" ng-model="value" />'}a+="</div>",l=e(a)(t),n.replaceWith(l),t.$on("$destroy",function(){l=void 0,n=void 0})}var n={};return n.scope={value:"=",editing:"=",editList:"=",displayValue:"="},n.restrict="E",n.link=t,n}]),i.controller("EmployeesCtrl",["$scope","EmployeeService",function(e,t){t.query(function(t,n){e.employees=t},n)}]),i.controller("EmployeeCtrl",["$scope","$routeParams","EmployeeService","TeamService","$q","config","$route",function(e,t,i,l,o,r,a){function c(e,t){for(var n=0,i=e.length;n<i;++n){var l=e[n];if(l._id===t)return l}}e.address={},o.all([i.get({employeeId:t.employeeId}).$promise,l.query().$promise]).then(function(t){e.teams=t[1],e.employee=t[0],e.employee.team=c(e.teams,e.employee.team_id)})["catch"](n),e.editing=!1,e.states=r.states.slice(0),e.edit=function(){e.editing=!e.editing},e.save=function(){var n=e.employee.address.lines;n.length&&(n=n.filter(function(e){return e})),e.employee.address.lines=n,e.employee.team_id=e.employee.team._id,i.update({employeeId:t.employeeId},e.employee,function(){e.editing=!e.editing})},e.cancel=function(){a.reload()},e.address.addLine=function(t){var n=e.employee.address.lines;n.splice(t+1,0,"")},e.address.removeLine=function(t){var n=e.employee.address.lines;n.splice(t,1)}}]),i.controller("TeamsCtrl",["$scope","TeamService",function(e,t){t.query(function(t){e.teams=t},n)}]),i.controller("TeamCtrl",["$scope","$routeParams","TeamService",function(e,t,i){i.get({teamId:t.teamId},function(t,n){e.team=t},n)}]),i.controller("view",["$scope","EmployeeService",function(e,t){e.employees=[],e.firstName=e.lastName="",t.list(function(t){e.employees=t})}]),i.controller("edit",["$scope","EmployeeService","$routeParams",function(e,t,n){e.employee={},t.get({employeeId:n.employeeId},function(t){e.employees=t})}])}(angular,window);